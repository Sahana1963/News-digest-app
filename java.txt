const API_KEY = "620485a84236437b95635c1037f2aba9"; // Your API Key

async function fetchNews() {
  const query = document.getElementById("searchInput").value.trim();
  const container = document.getElementById("newsContainer");
  container.innerHTML = "<p>Loading news...</p>";

  if (!query) {
    container.innerHTML = "<p>Please enter a topic to search news.</p>";
    return;
  }

  try {
    const response = await fetch(
      `https://newsapi.org/v2/everything?q=${encodeURIComponent(query)}&pageSize=8&sortBy=publishedAt&language=en&apiKey=${API_KEY}`
    );

    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }

    const data = await response.json();
    container.innerHTML = "";

    if (data.articles.length === 0) {
      container.innerHTML = `<p>No news found for "${query}".</p>`;
      return;
    }

    data.articles.forEach(article => {
      const card = document.createElement("div");
      card.className = "news-card";
      card.innerHTML = `
        <h3>${article.title}</h3>
        <p>${article.description || "No description available."}</p>
        <a href="${article.url}" target="_blank">Read full article</a>
      `;
      container.appendChild(card);
    });
  } catch (error) {
    console.error("Error fetching news:", error);
    container.innerHTML = "<p>Failed to load news. Please try again later.</p>";
  }
}
